{
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": {
          "type": "grafana",
          "uid": "-- Grafana --"
        },
        "enable": true,
        "hide": true,
        "iconColor": "rgba(0, 211, 255, 1)",
        "name": "Annotations & Alerts",
        "type": "dashboard"
      }
    ]
  },
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 1,
  "links": [],
  "panels": [
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 0
      },
      "id": 100,
      "panels": [],
      "title": "Infrastructure · tickleveldb",
      "type": "row"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "afeba553t5qtcc"
      },
      "description": "Tamaño actual de tickleveldb. Warn: 700 MB · Crit: 900 MB",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "max": 1024,
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": 0
              },
              {
                "color": "yellow",
                "value": 700
              },
              {
                "color": "red",
                "value": 900
              }
            ]
          },
          "unit": "megabytes"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 6,
        "w": 4,
        "x": 0,
        "y": 1
      },
      "id": 10,
      "options": {
        "minVizHeight": 75,
        "minVizWidth": 75,
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showThresholdLabels": true,
        "showThresholdMarkers": true,
        "sizing": "auto"
      },
      "pluginVersion": "12.4.0",
      "targets": [
        {
          "editorMode": "code",
          "expr": "pg_database_size_bytes{datname=\"tickleveldb\"} / 1048576",
          "legendFormat": "DB Size",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "DB Size (MB)",
      "type": "gauge"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "afeba553t5qtcc"
      },
      "description": "Conexiones activas a tickleveldb. Warn: 60 · Crit: 85 (de 100 max_connections)",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "max": 100,
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": 0
              },
              {
                "color": "yellow",
                "value": 60
              },
              {
                "color": "red",
                "value": 85
              }
            ]
          },
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 6,
        "w": 4,
        "x": 4,
        "y": 1
      },
      "id": 8,
      "options": {
        "minVizHeight": 75,
        "minVizWidth": 75,
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showThresholdLabels": true,
        "showThresholdMarkers": true,
        "sizing": "auto"
      },
      "pluginVersion": "12.4.0",
      "targets": [
        {
          "editorMode": "code",
          "expr": "pg_stat_database_numbackends{datname=\"tickleveldb\"}",
          "legendFormat": "Conexiones",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "Active Connections",
      "type": "gauge"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "afeba553t5qtcc"
      },
      "description": "Tasa de escritura en tiempo real. Se agregaron updates/s y deletes/s para detectar compactaciones o limpiezas inesperadas.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "inserts/s",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 15,
            "gradientMode": "opacity",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "smooth",
            "lineWidth": 2,
            "pointSize": 4,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "never",
            "showValues": false,
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "line"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": 0
              },
              {
                "color": "red",
                "value": 500
              }
            ]
          },
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 6,
        "w": 8,
        "x": 8,
        "y": 1
      },
      "id": 13,
      "options": {
        "legend": {
          "calcs": [
            "mean",
            "max",
            "lastNotNull"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "multi",
          "sort": "desc"
        }
      },
      "pluginVersion": "12.4.0",
      "targets": [
        {
          "editorMode": "code",
          "expr": "rate(pg_stat_database_tup_inserted{datname=\"tickleveldb\"}[1m])",
          "legendFormat": "inserts/s",
          "range": true,
          "refId": "A"
        },
        {
          "editorMode": "code",
          "expr": "rate(pg_stat_database_tup_updated{datname=\"tickleveldb\"}[1m])",
          "legendFormat": "updates/s",
          "range": true,
          "refId": "B"
        },
        {
          "editorMode": "code",
          "expr": "rate(pg_stat_database_tup_deleted{datname=\"tickleveldb\"}[1m])",
          "legendFormat": "deletes/s",
          "range": true,
          "refId": "C"
        }
      ],
      "title": "DB Write Throughput (inserts · updates · deletes)",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "afeba553t5qtcc"
      },
      "description": "Ratio de bloques servidos desde shared_buffers. Por debajo de 0.95 indica presión de I/O.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "cache hit %",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 10,
            "gradientMode": "opacity",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "smooth",
            "lineWidth": 2,
            "pointSize": 4,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "never",
            "showValues": false,
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "max": 1,
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "red",
                "value": 0
              },
              {
                "color": "yellow",
                "value": 0.9
              },
              {
                "color": "green",
                "value": 0.95
              }
            ]
          },
          "unit": "percentunit"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 6,
        "w": 8,
        "x": 16,
        "y": 1
      },
      "id": 14,
      "options": {
        "legend": {
          "calcs": [
            "mean",
            "lastNotNull"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "12.4.0",
      "targets": [
        {
          "editorMode": "code",
          "expr": "pg_stat_database_blks_hit{datname=\"tickleveldb\"} / (pg_stat_database_blks_hit{datname=\"tickleveldb\"} + pg_stat_database_blks_read{datname=\"tickleveldb\"})",
          "legendFormat": "Cache Hit Ratio",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "Cache Hit Ratio (tickleveldb)",
      "type": "timeseries"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 7
      },
      "id": 101,
      "panels": [],
      "title": "Kafka Pipeline · trades-raw",
      "type": "row"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "afeba553t5qtcc"
      },
      "description": "Offset actual por partición. Desequilibrio > 20% entre particiones indica problema de partitioning key.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": 0
              },
              {
                "color": "yellow",
                "value": 100000
              },
              {
                "color": "red",
                "value": 500000
              }
            ]
          },
          "unit": "locale"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 5,
        "w": 8,
        "x": 0,
        "y": 8
      },
      "id": 4,
      "options": {
        "minVizHeight": 50,
        "minVizWidth": 75,
        "orientation": "horizontal",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showThresholdLabels": true,
        "showThresholdMarkers": true,
        "sizing": "auto"
      },
      "pluginVersion": "12.4.0",
      "targets": [
        {
          "editorMode": "code",
          "expr": "kafka_topic_partition_current_offset{topic=\"trades-raw\"}",
          "legendFormat": "P{{partition}}",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "Offset por Partición · trades-raw",
      "type": "gauge"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "afeba553t5qtcc"
      },
      "description": "Lag acumulado por grupo y topic. Warn: 1000 msg · Crit: 10000 msg",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "msg lag",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 20,
            "gradientMode": "opacity",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "smooth",
            "lineWidth": 2,
            "pointSize": 4,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "never",
            "showValues": false,
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "line+area"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": 0
              },
              {
                "color": "yellow",
                "value": 1000
              },
              {
                "color": "red",
                "value": 10000
              }
            ]
          },
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 5,
        "w": 8,
        "x": 8,
        "y": 8
      },
      "id": 5,
      "options": {
        "legend": {
          "calcs": [
            "max",
            "lastNotNull"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "multi",
          "sort": "desc"
        }
      },
      "pluginVersion": "12.4.0",
      "targets": [
        {
          "editorMode": "code",
          "expr": "sum(kafka_consumergroup_lag) by (group, topic)",
          "legendFormat": "{{group}} · {{topic}}",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "Consumer Group Lag",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "afeba553t5qtcc"
      },
      "description": "Mensajes enviados por segundo agrupados por exchange.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "msg/s",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 15,
            "gradientMode": "opacity",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "smooth",
            "lineWidth": 2,
            "pointSize": 4,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "never",
            "showValues": false,
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": 0
              },
              {
                "color": "red",
                "value": 500
              }
            ]
          },
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 5,
        "w": 8,
        "x": 16,
        "y": 8
      },
      "id": 1,
      "options": {
        "legend": {
          "calcs": [
            "mean",
            "max",
            "lastNotNull"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "multi",
          "sort": "desc"
        }
      },
      "pluginVersion": "12.4.0",
      "targets": [
        {
          "editorMode": "code",
          "expr": "sum(rate(tickstream_producer_messages_sent_total[1m])) by (exchange)",
          "legendFormat": "{{exchange}}",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "Producer Send Rate · by Exchange",
      "type": "timeseries"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 13
      },
      "id": 102,
      "panels": [],
      "title": "Producer · binance",
      "type": "row"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "afeba553t5qtcc"
      },
      "description": "Tiempo de vida del producer. Si es 0 o ausente, el producer está caído.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [
            {
              "options": {
                "from": 0,
                "result": {
                  "color": "red",
                  "text": "DOWN"
                },
                "to": 0
              },
              "type": "range"
            },
            {
              "options": {
                "from": 1,
                "result": {
                  "color": "green"
                },
                "to": 99999999
              },
              "type": "range"
            }
          ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "red",
                "value": 0
              },
              {
                "color": "green",
                "value": 1
              }
            ]
          },
          "unit": "s"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 0,
        "y": 14
      },
      "id": 11,
      "options": {
        "colorMode": "background",
        "graphMode": "none",
        "justifyMode": "center",
        "orientation": "auto",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "value_and_name",
        "wideLayout": true
      },
      "pluginVersion": "12.4.0",
      "targets": [
        {
          "editorMode": "code",
          "expr": "tickstream_producer_uptime_seconds{exchange=\"binance\"}",
          "legendFormat": "binance uptime",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "Producer Uptime",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "afeba553t5qtcc"
      },
      "description": "Errores acumulados en ventana de 5 min. Warn: 5 · Crit: 20",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": 0
              },
              {
                "color": "yellow",
                "value": 5
              },
              {
                "color": "red",
                "value": 20
              }
            ]
          },
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 4,
        "y": 14
      },
      "id": 15,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "center",
        "orientation": "auto",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "value_and_name",
        "wideLayout": true
      },
      "pluginVersion": "12.4.0",
      "targets": [
        {
          "editorMode": "code",
          "expr": "increase(tickstream_producer_errors_total{exchange=\"binance\"}[5m])",
          "legendFormat": "errors 5m",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "Producer Errors (5m window)",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "afeba553t5qtcc"
      },
      "description": "Latencia de envío con percentiles. Warn: 50ms · Crit: 200ms. Se agregaron p95 y p99 para detectar tail latency.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "ms",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 15,
            "gradientMode": "opacity",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "smooth",
            "lineWidth": 2,
            "pointSize": 4,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "never",
            "showValues": false,
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "line+area"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": 0
              },
              {
                "color": "yellow",
                "value": 50
              },
              {
                "color": "red",
                "value": 200
              }
            ]
          },
          "unit": "ms"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 16,
        "x": 8,
        "y": 14
      },
      "id": 3,
      "options": {
        "legend": {
          "calcs": [
            "mean",
            "max",
            "p95"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "multi",
          "sort": "desc"
        }
      },
      "pluginVersion": "12.4.0",
      "targets": [
        {
          "editorMode": "code",
          "expr": "sum(rate(tickstream_producer_send_latency_seconds_sum[1m])) / sum(rate(tickstream_producer_send_latency_seconds_count[1m])) * 1000",
          "legendFormat": "p50 avg",
          "range": true,
          "refId": "A"
        },
        {
          "editorMode": "code",
          "expr": "histogram_quantile(0.95, sum(rate(tickstream_producer_send_latency_seconds_bucket[1m])) by (le)) * 1000",
          "legendFormat": "p95",
          "range": true,
          "refId": "B"
        },
        {
          "editorMode": "code",
          "expr": "histogram_quantile(0.99, sum(rate(tickstream_producer_send_latency_seconds_bucket[1m])) by (le)) * 1000",
          "legendFormat": "p99",
          "range": true,
          "refId": "C"
        }
      ],
      "title": "Send Latency to Kafka · p50 / p95 / p99",
      "type": "timeseries"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 18
      },
      "id": 103,
      "panels": [],
      "title": "Market Data · ${symbol}",
      "type": "row"
    },
    {
      "datasource": {
        "type": "yesoreyeram-infinity-datasource",
        "uid": "bfec4xsgypjb4f"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": 0
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "short"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "id"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Events"
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 3,
        "w": 6,
        "x": 0,
        "y": 19
      },
      "id": 7,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "center",
        "orientation": "auto",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "value_and_name",
        "wideLayout": true
      },
      "pluginVersion": "12.4.0",
      "targets": [
        {
          "columns": [],
          "datasource": {
            "type": "yesoreyeram-infinity-datasource",
            "uid": "bfec4xsgypjb4f"
          },
          "filters": [],
          "format": "table",
          "global_query_id": "",
          "parser": "backend",
          "refId": "A",
          "root_selector": "",
          "source": "url",
          "type": "json",
          "url": "${api_host}/api/v1/trades",
          "url_options": {
            "data": "",
            "method": "GET"
          }
        }
      ],
      "title": "Total Trades",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "yesoreyeram-infinity-datasource",
        "uid": "bfec4xsgypjb4f"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": 0
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 3,
        "w": 6,
        "x": 6,
        "y": 19
      },
      "id": 6,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "center",
        "orientation": "auto",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "value_and_name",
        "wideLayout": true
      },
      "pluginVersion": "12.4.0",
      "targets": [
        {
          "columns": [],
          "datasource": {
            "type": "yesoreyeram-infinity-datasource",
            "uid": "bfec4xsgypjb4f"
          },
          "filters": [],
          "format": "table",
          "global_query_id": "",
          "parser": "backend",
          "refId": "A",
          "root_selector": "",
          "source": "url",
          "type": "json",
          "url": "${api_host}/api/v1/metrics",
          "url_options": {
            "data": "",
            "method": "GET"
          }
        }
      ],
      "title": "API Metrics",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "afeba553t5qtcc"
      },
      "description": "Comparativa de mensajes producidos vs inserciones confirmadas en DB. La brecha entre ambas series revela pérdida o latencia en el pipeline.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "msg/s",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "bars",
            "fillOpacity": 70,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 4,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "never",
            "showValues": false,
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": 0
              }
            ]
          },
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 12,
        "y": 19
      },
      "id": 16,
      "options": {
        "legend": {
          "calcs": [
            "mean",
            "lastNotNull"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "multi",
          "sort": "desc"
        }
      },
      "pluginVersion": "12.4.0",
      "targets": [
        {
          "editorMode": "code",
          "expr": "sum(rate(tickstream_producer_messages_sent_total[1m])) by (exchange)",
          "legendFormat": "{{exchange}} · sent",
          "range": true,
          "refId": "A"
        },
        {
          "editorMode": "code",
          "expr": "sum(rate(pg_stat_database_tup_inserted{datname=\"tickleveldb\"}[1m]))",
          "legendFormat": "db · inserts",
          "range": true,
          "refId": "B"
        }
      ],
      "title": "End-to-End Throughput · Producer vs DB",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "yesoreyeram-infinity-datasource",
        "uid": "bfec4xsgypjb4f"
      },
      "description": "Datos de velas para el par y el intervalo seleccionados. Min en rojo · Max en verde · Volume en ámbar.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "#e2e8f0",
            "mode": "fixed"
          },
          "custom": {
            "align": "left",
            "cellOptions": {
              "type": "auto"
            },
            "filterable": true,
            "footer": {
              "reducers": []
            },
            "inspect": false,
            "wrapHeaderText": false,
            "wrapText": false
          },
          "links": [],
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": 0
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "locale"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "time"
            },
            "properties": [
              {
                "id": "unit",
                "value": "dateTimeAsIso"
              },
              {
                "id": "custom.width",
                "value": 170
              },
              {
                "id": "displayName",
                "value": "Time"
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "min_price"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 120
              },
              {
                "id": "displayName",
                "value": "Min"
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "type": "color-text"
                }
              },
              {
                "id": "color",
                "value": {
                  "fixedColor": "#ef4444",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "max_price"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 120
              },
              {
                "id": "displayName",
                "value": "Max"
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "type": "color-text"
                }
              },
              {
                "id": "color",
                "value": {
                  "fixedColor": "#10b981",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "avg_price"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 120
              },
              {
                "id": "displayName",
                "value": "Avg"
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "total_volume"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 120
              },
              {
                "id": "displayName",
                "value": "Volume"
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "type": "color-text"
                }
              },
              {
                "id": "color",
                "value": {
                  "fixedColor": "#f59e0b",
                  "mode": "fixed"
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 0,
        "y": 22
      },
      "id": 12,
      "options": {
        "cellHeight": "sm",
        "enablePagination": true,
        "footer": {
          "countRows": false,
          "fields": [],
          "reducer": [
            "sum"
          ],
          "show": false
        },
        "showHeader": true
      },
      "pluginVersion": "12.4.0",
      "targets": [
        {
          "columns": [],
          "datasource": {
            "type": "yesoreyeram-infinity-datasource",
            "uid": "bfec4xsgypjb4f"
          },
          "filters": [],
          "format": "table",
          "global_query_id": "",
          "parser": "backend",
          "refId": "A",
          "root_selector": "",
          "source": "url",
          "type": "json",
          "url": "${api_host}/api/v1/trades/chart?symbol=${symbol}&interval=${interval}&limit=20",
          "url_options": {
            "data": "",
            "method": "GET"
          }
        }
      ],
      "title": "${symbol} · OHLCV · ${interval}",
      "type": "table"
    }
  ],
  "preload": false,
  "schemaVersion": 42,
  "tags": [
    "tickstream",
    "observability",
    "kafka",
    "postgres"
  ],
  "templating": {
    "list": [
      {
        "current": {
          "text": "http://localhost:8080",
          "value": "http://localhost:8080"
        },
        "description": "Base URL del API REST (ej: http://localhost:8080)",
        "label": "API Host",
        "name": "api_host",
        "options": [
          {
            "selected": true,
            "text": "http://localhost:8080",
            "value": "http://localhost:8080"
          }
        ],
        "query": "http://localhost:8080",
        "type": "textbox"
      },
      {
        "current": {
          "text": "BTCUSD",
          "value": "BTCUSD"
        },
        "description": "Par de trading a visualizar",
        "label": "Symbol",
        "name": "symbol",
        "options": [
          {
            "selected": true,
            "text": "BTCUSD",
            "value": "BTCUSD"
          }
        ],
        "query": "BTCUSD",
        "type": "textbox"
      },
      {
        "current": {
          "text": "1 minute",
          "value": "1 minute"
        },
        "description": "Intervalo de agregación para la tabla de velas",
        "label": "Interval",
        "name": "interval",
        "options": [],
        "query": "1 minute,5 minute,15 minute,1 hour",
        "type": "custom",
        "valuesFormat": "csv"
      }
    ]
  },
  "time": {
    "from": "now-30m",
    "to": "now"
  },
  "timepicker": {},
  "timezone": "browser",
  "title": "TickStream · Observability",
  "uid": "adpmbwm",
  "version": 2,
  "weekStart": ""
}